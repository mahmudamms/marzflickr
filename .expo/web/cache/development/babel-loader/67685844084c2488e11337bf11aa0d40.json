{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\iym_mobile\\\\SC\\\\iym_mobile\\\\screens\\\\Detail\\\\Detail_mrir.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Block, Button, Input, theme, Text } from \"galio-framework\";\nimport { DetailList, Icon, Filter, LoadMore } from \"../../components\";\nimport { nowTheme, detail_mrir, config } from \"../../constants\";\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    width = _Dimensions$get.width;\n\nvar Detail = function (_React$Component) {\n  _inherits(Detail, _React$Component);\n\n  var _super = _createSuper(Detail);\n\n  function Detail() {\n    var _this;\n\n    _classCallCheck(this, Detail);\n\n    _this = _super.call(this);\n    _this._isMounted = false;\n\n    _this.loadCallback = function (limit) {\n      var project = _this.state.dataLogin.project;\n      var api = _this.state.dataLogin.api;\n      var category = _this.state.category;\n      var url = config.config.url + '/api/mrir/list/pending/' + category + '/' + limit;\n      console.log(url);\n      console.log(api);\n      fetch(url, {\n        method: 'GET',\n        headers: new Headers({\n          'Authorization': api\n        })\n      }).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        var list_data = data;\n\n        if (list_data.slice(-1) != '}') {\n          list_data = data + '}';\n        }\n\n        list_data = JSON.parse(list_data);\n        var all_data = _this.state.listData;\n        list_data.results.forEach(function (element) {\n          all_data.push(element);\n        });\n\n        _this.setState({\n          listData: all_data,\n          isLoadData: false,\n          loadButton: list_data.results.length >= 10 ? true : false\n        });\n      });\n    };\n\n    _this.filterCallback = function (filterdata) {\n      _this.setState({\n        isLoadData: true,\n        filter: filterdata\n      });\n\n      var project = _this.state.dataLogin.project;\n      var api = _this.state.dataLogin.api;\n      var category = _this.state.category;\n      var url = config.config.url + '/api/mrir/list/pending/' + category + '/0/' + filterdata;\n      console.log(url);\n      console.log(api);\n      fetch(url, {\n        method: 'GET',\n        headers: new Headers({\n          'Authorization': api\n        })\n      }).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        var list_data = data;\n\n        if (data.slice(-1) != '}') {\n          list_data = data + '}';\n        }\n\n        list_data = JSON.parse(list_data);\n\n        _this.setState({\n          listData: list_data.results,\n          isLoadData: false,\n          loadButton: list_data.results.length >= 10 ? true : false\n        });\n      });\n    };\n\n    _this.readData = function () {\n      var project = _this.state.dataLogin.project;\n      var api = _this.state.dataLogin.api;\n      var category = _this.state.category;\n      var url = config.config.url + '/api/mrir/list/pending/' + category + '/0';\n      console.log(url);\n      console.log(api);\n      fetch(url, {\n        method: 'GET',\n        headers: new Headers({\n          'Content-Type': 'application/json',\n          \"Accept\": \"application/json\",\n          'Authorization': api\n        })\n      }).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        var list_data = data;\n\n        if (data.slice(-1) != '}') {\n          list_data = data + '}';\n        }\n\n        list_data = JSON.parse(list_data);\n\n        _this.setState({\n          listData: list_data.results,\n          isLoading: false,\n          loadButton: list_data.results.length >= 10 ? true : false\n        });\n      }).catch(function (error) {});\n    };\n\n    _this.loadData = function _callee(limit) {\n      var category, data_user, url, api;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              _this.setState({\n                isLoadData: true\n              });\n\n              category = _this.props.route.params.category;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('data_user'));\n\n            case 5:\n              data_user = _context.sent;\n              data_user = JSON.parse(data_user);\n              url = config.config.url + '/api/mrir/list/pending/' + category + '/' + data_user.project_id + '/' + limit;\n              api = data_user.api_key;\n              console.log(url);\n              console.log(api);\n              _context.next = 13;\n              return _regeneratorRuntime.awrap(fetch(url, {\n                method: 'GET',\n                headers: new Headers({\n                  'Authorization': api\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                var list_data = _this.state.listData;\n                var dt_response = {\n                  mrir_id: 0,\n                  project: '',\n                  report_no: 'ABCDEFG',\n                  po_number: '',\n                  discipline: '',\n                  do_pl: '',\n                  vendor: '',\n                  total: 0,\n                  created_by: '',\n                  created_date: ''\n                };\n                list_data.push(dt_response);\n\n                _this.setState({\n                  listData: list_data,\n                  isLoadData: false\n                });\n              }));\n\n            case 13:\n              _context.next = 17;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 15]], Promise);\n    };\n\n    _this.inputValueUpdate = function (val, prop) {\n      var state = _this.state;\n      state[prop] = val;\n\n      _this.setState(state);\n    };\n\n    _this.renderArticles = function () {\n      return React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 9\n        }\n      }, React.createElement(Filter, {\n        filterClicked: _this.filterCallback,\n        category: 'MRIR-' + _this.state.category,\n        filterBy: ['Discipline'],\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }\n      }), React.createElement(ScrollView, {\n        showsVerticalScrollIndicator: false,\n        contentContainerStyle: styles.articles,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }\n      }, React.createElement(Block, {\n        flex: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 17\n        }\n      }, _this.state.listData.map(function (item, index) {\n        return React.createElement(Block, {\n          flex: true,\n          row: true,\n          key: index,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 29\n          }\n        }, React.createElement(DetailList, {\n          item: item,\n          category: _this.state.category,\n          horizontal: true,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 33\n          }\n        }));\n      })), _this.state.loadButton == true ? React.createElement(LoadMore, {\n        limit: _this.state.listData.length + 1,\n        ButtonClicked: _this.loadCallback,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 25\n        }\n      }) : null));\n    };\n\n    _this.Loading = function () {\n      return React.createElement(Block, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 9\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        color: nowTheme.COLORS.PRIMARY,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }\n      }));\n    };\n\n    console.log();\n    _this.state = {\n      listData: [],\n      isLoading: true,\n      isLoadData: false,\n      loadButton: false,\n      dataLogin: [],\n      category: '',\n      filter: ''\n    };\n    return _this;\n  }\n\n  _createClass(Detail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data_user, data_login, category;\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              this._isMounted = true;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('data_user'));\n\n            case 3:\n              data_user = _context2.sent;\n              data_user = JSON.parse(data_user);\n              data_login = {\n                project: data_user.project_id,\n                api: data_user.api_key\n              };\n              category = this.props.route.params.category;\n              this.setState({\n                dataLogin: data_login,\n                category: category\n              });\n              this.readData();\n              return _context2.abrupt(\"return\", function () {\n                isMounted = false;\n              });\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Block, {\n        flex: true,\n        center: true,\n        style: styles.home,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }\n      }, this.state.isLoading == true ? this.Loading() : this.renderArticles());\n    }\n  }]);\n\n  return Detail;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  home: {\n    width: width\n  },\n  articles: {\n    width: width - theme.SIZES.BASE * 2,\n    paddingVertical: theme.SIZES.BASE,\n    paddingHorizontal: 2,\n    fontFamily: 'montserrat-regular'\n  },\n  search: {\n    height: 48,\n    borderWidth: 1,\n    borderRadius: 30,\n    borderColor: nowTheme.COLORS.BORDER\n  }\n});\nexport default Detail;","map":{"version":3,"sources":["C:/xampp/htdocs/iym_mobile/SC/iym_mobile/screens/Detail/Detail_mrir.js"],"names":["React","AsyncStorage","Block","Button","Input","theme","Text","DetailList","Icon","Filter","LoadMore","nowTheme","detail_mrir","config","Dimensions","get","width","Detail","_isMounted","loadCallback","limit","project","state","dataLogin","api","category","url","console","log","fetch","method","headers","Headers","then","response","text","data","list_data","slice","JSON","parse","all_data","listData","results","forEach","element","push","setState","isLoadData","loadButton","length","filterCallback","filterdata","filter","readData","isLoading","catch","error","loadData","props","route","params","getItem","data_user","project_id","api_key","json","dt_response","mrir_id","report_no","po_number","discipline","do_pl","vendor","total","created_by","created_date","inputValueUpdate","val","prop","renderArticles","styles","articles","map","item","index","Loading","flex","justifyContent","alignItems","COLORS","PRIMARY","data_login","isMounted","home","Component","StyleSheet","create","SIZES","BASE","paddingVertical","paddingHorizontal","fontFamily","search","height","borderWidth","borderRadius","borderColor","BORDER"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport { \n    ActivityIndicator,\n    AsyncStorage,\n    Dimensions,\n    StyleSheet, \n    ScrollView \n} from \"react-native\";\n\nimport { \n    Block,\n    Button,\n    Input,\n    theme, \n    Text \n} from \"galio-framework\";\n\nimport { DetailList, Icon, Filter, LoadMore } from \"../../components\";\nimport { nowTheme, detail_mrir, config } from \"../../constants\";\n\nconst { width } = Dimensions.get(\"screen\");\n\n// import { nowTheme } from '../../constants';\n\nclass Detail extends React.Component {\n\n    _isMounted = false;\n\n    constructor() {\n        super();\n        console.log();\n\n        this.state = {\n          listData: [],\n          isLoading: true,\n          isLoadData: false,\n          loadButton: false,\n          dataLogin: [],\n          category: '',\n          filter: '',\n        };\n    }\n\n    async componentDidMount() {\n        this._isMounted = true;\n\n        var data_user = await AsyncStorage.getItem('data_user');\n        var data_user = JSON.parse(data_user);\n\n        var data_login = {\n            project: data_user.project_id,\n            api: data_user.api_key,\n        }\n\n        var category = this.props.route.params.category;\n\n        this.setState({\n            dataLogin: data_login,\n            category: category,\n        });\n\n        this.readData()\n\n        return () => { isMounted = false };\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n    \n\n    loadCallback = (limit) =>{\n\n        var project     = this.state.dataLogin.project;\n        var api         = this.state.dataLogin.api;\n        var category    = this.state.category;\n\n        var url = config.config.url + '/api/mrir/list/pending/' + category + '/' + limit;\n\n        console.log(url);\n        console.log(api);\n    \n        fetch(url, {\n            method: 'GET',\n            headers: new Headers({\n                'Authorization': api\n            }),\n        })\n        .then((response) => response.text())\n        .then(data =>{\n\n            var list_data = data;\n        \n            if(list_data.slice(-1) != '}'){\n                list_data = data + '}';\n            }\n\n            list_data = JSON.parse(list_data);\n\n            var all_data = this.state.listData;\n\n            list_data.results.forEach(element => {\n                all_data.push(element);\n            });\n\n            this.setState({\n                listData: all_data,\n                isLoadData: false,\n                loadButton: (list_data.results.length >= 10 ? true : false),\n            });\n\n        });\n    }\n\n    filterCallback = (filterdata) => {\n\n        this.setState({\n            isLoadData : true,\n            filter: filterdata,\n        });\n\n        var project   = this.state.dataLogin.project;\n        var api       = this.state.dataLogin.api;\n        var category  = this.state.category;\n\n        var url = config.config.url + '/api/mrir/list/pending/' + category + '/0/' + filterdata;\n\n        console.log(url);\n        console.log(api);\n    \n        fetch(url, {\n            method: 'GET',\n            headers: new Headers({\n                'Authorization': api\n            }),\n        })\n        .then((response) => response.text())\n        .then(data =>{\n\n            var list_data = data;\n        \n            if(data.slice(-1) != '}'){\n                list_data = data + '}';\n            }\n\n            list_data = JSON.parse(list_data);\n\n            this.setState({\n                listData: list_data.results,\n                isLoadData: false,\n                loadButton: (list_data.results.length >= 10 ? true : false),\n            });\n\n        });\n    }\n\n    readData = () => {\n\n        var project     = this.state.dataLogin.project;\n        var api         = this.state.dataLogin.api;\n        var category    = this.state.category;\n\n        var url = config.config.url + '/api/mrir/list/pending/' + category + '/0';\n\n        console.log(url);\n        console.log(api);\n\n        fetch(url, {\n            method: 'GET',\n            headers: new Headers({\n                'Content-Type': 'application/json',\n                \"Accept\": \"application/json\",\n                'Authorization': api,\n            }),\n        })\n        .then((response) => response.text())\n        .then((data) =>{\n\n            var list_data = data;\n        \n            if(data.slice(-1) != '}'){\n                list_data = data + '}';\n            }\n\n            list_data = JSON.parse(list_data);\n\n            this.setState({\n                listData: list_data.results,\n                isLoading: false,\n                loadButton: (list_data.results.length >= 10 ? true : false)\n            });\n\n        }).catch((error) => {\n            // console.error(error);\n        });\n    }\n\n    loadData = async(limit) => {\n        try{\n\n            this.setState({isLoadData : true});\n\n            var category = this.props.route.params.category;\n\n            var data_user = await AsyncStorage.getItem('data_user');\n            var data_user = JSON.parse(data_user);\n\n            var url = config.config.url + '/api/mrir/list/pending/' + category + '/' + data_user.project_id + '/' + limit;\n\n            var api = data_user.api_key;\n\n            console.log(url);\n            console.log(api);\n        \n            await fetch(url, {\n                method: 'GET',\n                headers: new Headers({\n                    'Authorization': api\n                }),\n            })\n            .then((response) => response.json())\n            .then(data =>{\n                var list_data = this.state.listData;\n                // var dt_response = data.results;\n\n                var dt_response = {\n                    mrir_id: 0,\n                    project: '',\n                    report_no: 'ABCDEFG',\n                    po_number: '',\n                    discipline: '',\n                    do_pl: '',\n                    vendor: '',\n                    total: 0,\n                    created_by: '',\n                    created_date: '',\n                }\n\n                list_data.push(dt_response);\n\n                this.setState({\n                    listData: list_data,\n                    isLoadData: false,\n                });\n\n            });\n        } catch(e){\n\n        }\n    }\n\n    inputValueUpdate = (val, prop) => {\n        const state = this.state;\n        state[prop] = val;\n        this.setState(state);\n    }\n\n    renderArticles = () => {\n        return (\n        <Block>\n\n            <Filter \n                filterClicked={this.filterCallback}\n                category={'MRIR-' + this.state.category}\n                filterBy={[\n                    'Discipline',\n                ]}\n            />\n\n            <ScrollView\n                showsVerticalScrollIndicator={false}\n                contentContainerStyle={styles.articles}\n            >\n                <Block flex>\n                {\n                    // detail_mrir.map((item, index) => {\n                    this.state.listData.map((item, index) => {\n                        return(\n                            <Block flex row key={index}>\n                                <DetailList \n                                    item={item}\n                                    category={this.state.category}\n                                    horizontal \n                                />\n                            </Block>\n                        );\n                    })\n                }\n                </Block>\n\n                {\n                    this.state.loadButton == true ? (\n                        <LoadMore \n                            limit={this.state.listData.length + 1}\n                            ButtonClicked={this.loadCallback}\n                        />\n                    ) : null\n                }\n\n            </ScrollView>\n            \n        </Block>\n        );\n    };\n\n    Loading = function(){\n        return(\n        <Block style={{ flex: 1, justifyContent: 'center', alignItems: 'center'  }}>\n            <ActivityIndicator size=\"large\" color={nowTheme.COLORS.PRIMARY} />\n        </Block>\n        );\n    }\n\n    render() {\n        return (\n            <Block flex center style={styles.home}>\n                { this.state.isLoading == true ? this.Loading() : this.renderArticles() }\n            </Block>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n  home: {\n    width: width\n  },\n  articles: {\n    width: width - theme.SIZES.BASE * 2,\n    paddingVertical: theme.SIZES.BASE,\n    paddingHorizontal: 2,\n    fontFamily: 'montserrat-regular'\n  },\n  search: {\n    height: 48,\n    borderWidth: 1,\n    borderRadius: 30,\n    borderColor: nowTheme.COLORS.BORDER\n  },\n});\n\nexport default Detail;\n"]},"metadata":{},"sourceType":"module"}