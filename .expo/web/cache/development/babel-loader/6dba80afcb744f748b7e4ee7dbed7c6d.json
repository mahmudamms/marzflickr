{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\iym_mobile\\\\SC\\\\iym_mobile\\\\components\\\\FilterOne.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Picker from \"react-native-web/dist/exports/Picker\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport View from \"react-native-web/dist/exports/View\";\nimport PropTypes from 'prop-types';\nimport { Block, Input, Text, theme } from 'galio-framework';\nimport SearchableDropdown from 'react-native-searchable-dropdown';\nimport Icon from \"./Icon\";\nimport Select from \"./Select\";\nimport Button from \"./Button\";\nimport { nowTheme, config, detail_mrir } from \"../constants\";\nimport Autocomplete from \"./Autocomplete\";\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    height = _Dimensions$get.height,\n    width = _Dimensions$get.width;\n\nvar DismissKeyboard = function DismissKeyboard(_ref) {\n  var children = _ref.children;\n  return React.createElement(TouchableWithoutFeedback, {\n    onPress: function onPress() {\n      return Keyboard.dismiss();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 3\n    }\n  }, children);\n};\n\nvar FilterBar = function (_React$Component) {\n  _inherits(FilterBar, _React$Component);\n\n  var _super = _createSuper(FilterBar);\n\n  function FilterBar(props) {\n    var _this2;\n\n    _classCallCheck(this, FilterBar);\n\n    _this2 = _super.call(this);\n    _this2._isMounted = false;\n\n    _this2.setData = function (val, prop) {\n      var state = _this2.state;\n      state['isChanged'] = true;\n\n      _this2.setState(state);\n\n      state[prop] = val;\n      state[prop].index = 0;\n      state['isChanged'] = false;\n\n      _this2.setState(state);\n    };\n\n    _this2.readDiscipline = function () {\n      var project = _this2.state.dataLogin.project;\n      var api = _this2.state.dataLogin.api;\n      var url = config.config.url + '/api/discipline/';\n      console.log(url);\n      console.log(api);\n      fetch(url, {\n        method: 'GET',\n        headers: new Headers({\n          'Authorization': api\n        })\n      }).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        var list_data = data;\n\n        if (data.slice(-1) != '}') {\n          list_data = data + '}';\n        }\n\n        list_data = JSON.parse(list_data);\n        var dt = {\n          id: '',\n          name: 'All'\n        };\n        list_data.data.unshift(dt);\n\n        _this2.setState({\n          disciplineList: list_data.data\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    };\n\n    _this2.filterClicked = function (menu) {\n      var category_template = menu[1].toLowerCase();\n      var search = _this2.state.Search.id != undefined ? _this2.state.Search.id : '';\n      var module = _this2.state.Module.id != undefined ? _this2.state.Module.id : '';\n      var discipline = _this2.state.Discipline.id != undefined ? _this2.state.Discipline.id : '';\n      var drawing_type = _this2.state.Drawing_type.id != undefined ? _this2.state.Drawing_type.id : '';\n      var batch = _this2.state.Batch.id != undefined ? _this2.state.Batch.id : '';\n      var workpack_no = _this2.state.Workpack_No.id != undefined ? _this2.state.Workpack_No.id : '';\n\n      if (category_template == 'piecemark') {\n        var template = _this2.state.Piecemark.id != undefined ? _this2.state.Piecemark.id : '';\n      } else if (category_template == 'joint') {\n        var template = _this2.state.Joint.id != undefined ? _this2.state.Joint.id : '';\n      }\n\n      var data = workpack_no + 'xx' + template;\n\n      _this2.props.filterClicked(data, menu);\n    };\n\n    _this2.collapseShow = function () {\n      _this2.setState({\n        isShow: !_this2.state.isShow\n      });\n    };\n\n    _this2.testCallBack = function (text) {\n      console.log(text);\n    };\n\n    _this2.state = {\n      isShow: true,\n      isTemplateShow: true,\n      category: '',\n      menu: '',\n      disciplineList: [],\n      searchList: [],\n      isChanged: false,\n      dataLogin: [],\n      discipline: [],\n      acSelected: [],\n      dataSearch: [],\n      filterBy: [],\n      Search: {},\n      Unique_No: {}\n    };\n    return _this2;\n  }\n\n  _createClass(FilterBar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data_user, data_login;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this._isMounted = true;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('data_user'));\n\n            case 3:\n              data_user = _context.sent;\n              data_user = JSON.parse(data_user);\n              data_login = {\n                project: data_user.project_id,\n                api: data_user.api_key\n              };\n              this.setState({\n                dataLogin: data_login,\n                menu: this.props.menu,\n                filterBy: this.props.filterBy\n              });\n              return _context.abrupt(\"return\", function () {\n                isMounted = false;\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(DismissKeyboard, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 9\n        }\n      }, React.createElement(Block, {\n        card: true,\n        style: {\n          backgroundColor: nowTheme.COLORS.WHITE\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }\n      }, React.createElement(Block, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 17\n        }\n      }, React.createElement(Block, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }\n      }, this.props.filterBy.map(function (item, index) {\n        var arr_data = _this3.state[item];\n        var text_replace = item.replace('_', ' ');\n        return React.createElement(Block, {\n          key: index,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 37\n          }\n        }, _this3.state.isChanged == false ? React.createElement(Block, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 45\n          }\n        }, React.createElement(Autocomplete, {\n          onItemSelect: function onItemSelect(itemSelect) {\n            _this3.setData(itemSelect, item);\n          },\n          textInputValue: Object.keys(arr_data).length === 0 ? '' : arr_data.name,\n          itemStyle: {\n            padding: 10,\n            marginTop: 2,\n            backgroundColor: '#ddd',\n            borderColor: '#bbb',\n            borderWidth: 1,\n            borderRadius: 5,\n            fontFamily: 'montserrat-regular'\n          },\n          itemTextStyle: {\n            color: '#222',\n            fontFamily: 'montserrat-regular'\n          },\n          category: item,\n          menu: _this3.props.menu,\n          itemsContainerStyle: {\n            maxHeight: 140\n          },\n          resetValue: false,\n          workpack: '',\n          textInputProps: {\n            placeholder: \"Search \" + text_replace,\n            underlineColorAndroid: \"transparent\",\n            style: {\n              paddingVertical: 5,\n              paddingHorizontal: 10,\n              borderWidth: 1,\n              borderColor: '#ccc',\n              borderRadius: 5,\n              fontFamily: 'montserrat-regular'\n            }\n          },\n          listProps: {\n            nestedScrollEnabled: true\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 49\n          }\n        })) : null);\n      })))));\n    }\n  }]);\n\n  return FilterBar;\n}(React.Component);\n\nFilterBar.defaultProps = {\n  shadowless: false,\n  success: false,\n  error: false,\n  primary: false\n};\nFilterBar.propTypes = {\n  shadowless: PropTypes.bool,\n  success: PropTypes.bool,\n  error: PropTypes.bool,\n  primary: PropTypes.bool\n};\nvar styles = StyleSheet.create({\n  input: {\n    borderWidth: 1.5,\n    borderRadius: 5,\n    backgroundColor: '#ddd',\n    borderColor: nowTheme.COLORS.BORDER,\n    height: 44,\n    justifyContent: 'center'\n  },\n  success: {\n    borderColor: nowTheme.COLORS.INPUT_SUCCESS\n  },\n  error: {\n    borderColor: nowTheme.COLORS.INPUT_ERROR\n  },\n  primary: {\n    borderColor: nowTheme.COLORS.PRIMARY\n  },\n  shadow: {\n    shadowColor: nowTheme.COLORS.BLACK,\n    shadowOffset: {\n      width: 0,\n      height: 0.5\n    },\n    shadowRadius: 1,\n    shadowOpacity: 0.13,\n    elevation: 2\n  },\n  cardDescription: {\n    padding: theme.SIZES.BASE / 1\n  },\n  pickerStyle: {\n    paddingHorizontal: theme.SIZES.BASE / 1,\n    paddingBottom: theme.SIZES.BASE / 1.5,\n    borderRadius: 4,\n    borderColor: nowTheme.COLORS.BLACK\n  },\n  autocompleteContainer: {\n    flex: 1\n  }\n});\nexport default FilterBar;","map":{"version":3,"sources":["C:/xampp/htdocs/iym_mobile/SC/iym_mobile/components/FilterOne.js"],"names":["React","AsyncStorage","PropTypes","Block","Input","Text","theme","SearchableDropdown","Icon","Select","Button","nowTheme","config","detail_mrir","Autocomplete","Dimensions","get","height","width","DismissKeyboard","children","Keyboard","dismiss","FilterBar","props","_isMounted","setData","val","prop","state","setState","index","readDiscipline","project","dataLogin","api","url","console","log","fetch","method","headers","Headers","then","response","text","data","list_data","slice","JSON","parse","dt","id","name","unshift","disciplineList","catch","error","filterClicked","menu","category_template","toLowerCase","search","Search","undefined","module","Module","discipline","Discipline","drawing_type","Drawing_type","batch","Batch","workpack_no","Workpack_No","template","Piecemark","Joint","collapseShow","isShow","testCallBack","isTemplateShow","category","searchList","isChanged","acSelected","dataSearch","filterBy","Unique_No","getItem","data_user","data_login","project_id","api_key","isMounted","backgroundColor","COLORS","WHITE","map","item","arr_data","text_replace","replace","itemSelect","Object","keys","length","padding","marginTop","borderColor","borderWidth","borderRadius","fontFamily","color","maxHeight","placeholder","underlineColorAndroid","style","paddingVertical","paddingHorizontal","nestedScrollEnabled","Component","defaultProps","shadowless","success","primary","propTypes","bool","styles","StyleSheet","create","input","BORDER","justifyContent","INPUT_SUCCESS","INPUT_ERROR","PRIMARY","shadow","shadowColor","BLACK","shadowOffset","shadowRadius","shadowOpacity","elevation","cardDescription","SIZES","BASE","pickerStyle","paddingBottom","autocompleteContainer","flex"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport { \n  Animated,\n  AsyncStorage,\n  StyleSheet,\n  Image, \n  Dimensions,\n  Keyboard,\n  Picker,\n  FlatList,\n  ScrollView,\n  TouchableOpacity,\n  TouchableWithoutFeedback,\n  View\n} from 'react-native';\n\nimport PropTypes from 'prop-types';\n\nimport { Block, Input, Text, theme } from 'galio-framework';\n\nimport SearchableDropdown from 'react-native-searchable-dropdown';\n\nimport Icon from './Icon';\n// import Input from './Input';\nimport Select from './Select';\nimport Button from './Button';\n\nimport { nowTheme, config, detail_mrir } from \"../constants\";\n\nimport Autocomplete from './Autocomplete';\n\nconst { height, width } = Dimensions.get(\"screen\");\n\nconst DismissKeyboard = ({ children }) => (\n  <TouchableWithoutFeedback onPress={() => Keyboard.dismiss()}>{children}</TouchableWithoutFeedback>\n);\n\nclass FilterBar extends React.Component {\n\n  _isMounted = false;\n  \n  constructor(props) {\n    super();\n\n    this.state = {\n      isShow: true,\n      isTemplateShow: true,\n      category: '',\n      menu: '',\n      disciplineList: [],\n      searchList: [],\n      isChanged: false,\n      dataLogin: [],\n      discipline: [],\n      acSelected: [],\n      dataSearch: [],\n      filterBy: [],\n\n      Search: {},\n      Unique_No: {},\n    };\n    \n  }\n\n  async componentDidMount() {\n\n    this._isMounted = true;\n\n    var data_user = await AsyncStorage.getItem('data_user');\n    var data_user = JSON.parse(data_user);\n\n    var data_login = {\n        project: data_user.project_id,\n        api: data_user.api_key,\n    }\n\n    this.setState({\n      dataLogin: data_login,\n      menu: this.props.menu,\n      filterBy: this.props.filterBy,\n    });\n\n    // console.log(this.state.category);\n\n    return () => { isMounted = false };\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  setData = (val, prop) => {\n\n    const state = this.state;\n\n    state['isChanged'] = true;\n    this.setState(state);\n\n    state[prop] = val;\n\n    state[prop].index = 0;\n\n    state['isChanged'] = false;\n    this.setState(state);\n\n    // console.log(this.state.Module);\n\n  }\n\n  readDiscipline = () => {\n\n    var project = this.state.dataLogin.project;\n    var api     = this.state.dataLogin.api;\n\n    var url = config.config.url + '/api/discipline/';\n\n    console.log(url);\n    console.log(api);\n\n    fetch(url, {\n        method: 'GET',\n        headers: new Headers({\n            'Authorization': api\n        }),\n    })\n    .then((response) => response.text())\n    .then(data =>{\n\n      var list_data = data;\n        \n      if(data.slice(-1) != '}'){\n          list_data = data + '}';\n      }\n\n      list_data = JSON.parse(list_data);\n      \n      var dt = {\n        id: '',\n        name: 'All',\n      }\n\n      list_data.data.unshift(dt);\n\n      this.setState({\n        disciplineList: list_data.data,\n      })\n    }).catch((error) => {\n      console.error(error);\n    });\n  }\n\n  filterClicked = (menu) => {\n    var category_template = menu[1].toLowerCase();\n\n    var search        = (this.state.Search.id != undefined ? this.state.Search.id : '');\n    var module        = (this.state.Module.id != undefined ? this.state.Module.id : '');\n    var discipline    = (this.state.Discipline.id != undefined ? this.state.Discipline.id : '');\n    var drawing_type  = (this.state.Drawing_type.id != undefined ? this.state.Drawing_type.id : '');\n    var batch         = (this.state.Batch.id != undefined ? this.state.Batch.id : '');\n    var workpack_no   = (this.state.Workpack_No.id != undefined ? this.state.Workpack_No.id : '');\n\n    if(category_template == 'piecemark'){\n      var template     = (this.state.Piecemark.id != undefined ? this.state.Piecemark.id : '');\n    } else if(category_template == 'joint'){\n      var template      = (this.state.Joint.id != undefined ? this.state.Joint.id : '');\n    }\n\n    var data = workpack_no + 'xx' + template; \n\n    this.props.filterClicked(data, menu);\n  }\n\n  collapseShow = () => {\n    this.setState({\n      isShow: !this.state.isShow\n    })\n  }\n\n  testCallBack = (text) => {\n    console.log(text);\n  }\n  \n  render() {\n\n    return (\n      \n        <DismissKeyboard>\n            <Block card style={{ backgroundColor: nowTheme.COLORS.WHITE}}>\n                <Block>            \n                    <Block>\n                        { \n                            this.props.filterBy.map((item, index) => {\n                            var arr_data = this.state[item];\n                            var text_replace = item.replace('_', ' ');\n\n                                return(\n                                    <Block key={index} >                                    \n                                        { this.state.isChanged == false ? (\n                                            <Block>\n                                                <Autocomplete\n                                                    onItemSelect={(itemSelect) => {\n                                                    this.setData(itemSelect, item)\n                                                    }}\n                                                    textInputValue={Object.keys(arr_data).length === 0 ? '' : arr_data.name}\n                                                    itemStyle={{\n                                                    padding: 10,\n                                                    marginTop: 2,\n                                                    backgroundColor: '#ddd',\n                                                    borderColor: '#bbb',\n                                                    borderWidth: 1,\n                                                    borderRadius: 5,\n                                                    fontFamily: 'montserrat-regular',\n                                                    }}\n                                                    itemTextStyle={{ \n                                                    color: '#222', \n                                                    fontFamily: 'montserrat-regular',\n                                                    }}\n                                                    category={item}\n                                                    menu={this.props.menu}\n                                                    itemsContainerStyle={{ maxHeight: 140 }}\n                                                    resetValue={false}\n                                                    workpack={''}\n                                                    textInputProps={\n                                                    {\n                                                        placeholder: \"Search \" + text_replace,\n                                                        underlineColorAndroid: \"transparent\",\n                                                        style: {\n                                                            paddingVertical: 5,\n                                                            paddingHorizontal: 10,\n                                                            borderWidth: 1,\n                                                            borderColor: '#ccc',\n                                                            borderRadius: 5,\n                                                            fontFamily: 'montserrat-regular',\n                                                        },\n                                                    }\n                                                    }\n                                                    listProps={\n                                                    {\n                                                        nestedScrollEnabled: true,\n                                                    }\n                                                    }\n                                                />\n                                            </Block>\n                                        ): null }\n                                    </Block>\n                                );\n                            })\n                        }                     \n                    </Block>\n                </Block>\n            </Block>\n      </DismissKeyboard>\n    );\n  }\n}\n\nFilterBar.defaultProps = {\n  shadowless: false,\n  success: false,\n  error: false,\n  primary: false\n};\n\nFilterBar.propTypes = {\n  shadowless: PropTypes.bool,\n  success: PropTypes.bool,\n  error: PropTypes.bool,\n  primary: PropTypes.bool\n}\n\nconst styles = StyleSheet.create({\n  input: {\n    borderWidth: 1.5,\n    borderRadius: 5,\n    backgroundColor: '#ddd',\n    borderColor: nowTheme.COLORS.BORDER,\n    height: 44,\n    justifyContent: 'center',\n  },\n  success: {\n    borderColor: nowTheme.COLORS.INPUT_SUCCESS\n  },\n  error: {\n    borderColor: nowTheme.COLORS.INPUT_ERROR\n  },\n  primary: {\n    borderColor: nowTheme.COLORS.PRIMARY\n  },\n  shadow: {\n    shadowColor: nowTheme.COLORS.BLACK,\n    shadowOffset: { width: 0, height: 0.5 },\n    shadowRadius: 1,\n    shadowOpacity: 0.13,\n    elevation: 2,\n  },\n  cardDescription: {\n    padding: theme.SIZES.BASE / 1\n  },\n  pickerStyle: {\n    paddingHorizontal: theme.SIZES.BASE / 1,\n    paddingBottom: theme.SIZES.BASE / 1.5,\n    borderRadius: 4,\n    borderColor: nowTheme.COLORS.BLACK,\n  },\n  autocompleteContainer: {\n    flex: 1,\n    // zIndex: 1\n  },\n});\n\nexport default FilterBar;\n"]},"metadata":{},"sourceType":"module"}