{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\iym_mobile\\\\SC\\\\iym_mobile\\\\screens\\\\Approval\\\\Approval_mv.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport AwesomeAlert from 'react-native-awesome-alerts';\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Block, Button, Icon, Input, theme, Text } from \"galio-framework\";\nimport { ApprovalMVList } from \"../../components\";\nimport { nowTheme, approval_mrir, config } from \"../../constants\";\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    width = _Dimensions$get.width;\n\nvar Approval = function (_React$Component) {\n  _inherits(Approval, _React$Component);\n\n  var _super = _createSuper(Approval);\n\n  function Approval() {\n    var _this;\n\n    _classCallCheck(this, Approval);\n\n    _this = _super.call(this);\n    _this._isMounted = false;\n\n    _this.checkCallback = function (checked, id) {\n      var approval = _this.state.listApproval;\n\n      if (checked == true) {\n        approval.push(id);\n      } else {\n        for (var i = 0; i < approval.length; i++) {\n          if (approval[i] == id) {\n            approval.splice(i, 1);\n          }\n        }\n      }\n\n      _this.setState({\n        listApproval: approval\n      });\n\n      console.log(_this.state.listApproval);\n    };\n\n    _this.readData = function _callee() {\n      var id_master, project, api, url;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              id_master = _this.state.id_master;\n              project = _this.state.dataLogin.project;\n              api = _this.state.dataLogin.api;\n              url = config.config.url + '/api/mv/detail/pending/' + id_master;\n              console.log(url);\n              console.log(api);\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(fetch(url, {\n                method: 'GET',\n                headers: new Headers({\n                  'Authorization': api\n                })\n              }).then(function (response) {\n                return response.text();\n              }).then(function (data) {\n                var list_data = data;\n\n                if (data.slice(-1) != '}') {\n                  list_data = data + '}';\n                }\n\n                list_data = JSON.parse(list_data);\n\n                _this.setState({\n                  listData: list_data.results_detail,\n                  isLoading: false\n                });\n              }));\n\n            case 9:\n              _context.next = 13;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 11]], Promise);\n    };\n\n    _this.renderArticles = function () {\n      return React.createElement(ScrollView, {\n        showsVerticalScrollIndicator: false,\n        contentContainerStyle: styles.articles,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }\n      }, React.createElement(Block, {\n        flex: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }\n      }, _this.state.listData.map(function (item, index) {\n        return React.createElement(Block, {\n          flex: true,\n          row: true,\n          key: index,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }\n        }, React.createElement(ApprovalMVList, {\n          item: item,\n          checkboxChange: _this.checkCallback,\n          horizontal: true,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 29\n          }\n        }));\n      })));\n    };\n\n    _this.Loading = function () {\n      return React.createElement(Block, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        color: nowTheme.COLORS.PRIMARY,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 17\n        }\n      }));\n    };\n\n    _this.approvalButton = function () {\n      return React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontFamily: 'montserrat-bold'\n        },\n        size: 14,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }\n      }, \"Total Item: \", _this.state.listApproval.length)), React.createElement(Block, {\n        row: true,\n        space: \"between\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }\n      }, React.createElement(Button, {\n        label: \"\",\n        onPress: function onPress() {\n          return _this.setState({\n            showAlert: true,\n            statusApproval: 'A'\n          });\n        },\n        disabled: _this.state.listApproval.length == 0,\n        color: _this.state.listApproval.length == 0 ? theme.COLORS.BLOCK : nowTheme.COLORS.PRIMARY,\n        style: {\n          width: width / 3.7\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontFamily: 'montserrat-bold'\n        },\n        size: 14,\n        color: nowTheme.COLORS.WHITE,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 29\n        }\n      }, \"Approve\"))), React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }\n      }, React.createElement(Button, {\n        label: \"\",\n        onPress: function onPress() {\n          return _this.setState({\n            showAlert: true,\n            statusApproval: 'R'\n          });\n        },\n        color: _this.state.listApproval.length == 0 ? theme.COLORS.BLOCK : nowTheme.COLORS.ERROR,\n        style: {\n          width: width / 3.7\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontFamily: 'montserrat-bold'\n        },\n        size: 14,\n        color: nowTheme.COLORS.WHITE,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }\n      }, \"Reject\"))), React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 21\n        }\n      }, React.createElement(Button, {\n        label: \"\",\n        onPress: function onPress() {\n          return _this.setState({\n            showAlert: true,\n            statusApproval: 'P'\n          });\n        },\n        color: _this.state.listApproval.length == 0 ? theme.COLORS.BLOCK : nowTheme.COLORS.FACEBOOK,\n        style: {\n          width: width / 3.7\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontFamily: 'montserrat-bold',\n          textAlign: 'center'\n        },\n        size: 14,\n        color: nowTheme.COLORS.WHITE,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 29\n        }\n      }, \"Pending By QC\")))));\n    };\n\n    _this.onSubmit = function _callee2() {\n      var data, id_master, id_user, api, options, url;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.setState({\n                showAlert: false\n              });\n\n              data = [];\n\n              _this.state.listApproval.forEach(function (element) {\n                data.push({\n                  'id': element,\n                  'action': _this.state.statusApproval,\n                  'remarks': _this.state.remarks\n                });\n              });\n\n              id_master = _this.state.id_master;\n              id_user = _this.state.dataLogin.id_user;\n              api = _this.state.dataLogin.api;\n              options = {\n                method: 'POST',\n                headers: new Headers({\n                  'Authorization': api,\n                  'Content-Type': 'application/json'\n                }),\n                body: JSON.stringify({\n                  approved_by: id_user,\n                  approval: data,\n                  mat_verid: id_master\n                })\n              };\n              url = config.config.url + '/api/mv/approval_process';\n              _context2.next = 10;\n              return _regeneratorRuntime.awrap(fetch(url, options).then(function (response) {\n                return response.text();\n              }).then(function (data) {\n                console.log(data);\n\n                _this.setState({\n                  successAlert: true,\n                  listApproval: []\n                });\n              }).catch(function (error) {\n                console.error(error);\n              }));\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.inputValueUpdate = function (val, prop) {\n      var state = _this.state;\n      state[prop] = val;\n\n      _this.setState(state);\n    };\n\n    _this.alertConfirm = function () {\n      return React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 13\n        }\n      }, React.createElement(Block, {\n        style: {\n          textAlign: 'center'\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 17\n        }\n      }, React.createElement(Icon, {\n        size: 50,\n        color: nowTheme.COLORS.ERROR,\n        name: \"warning\",\n        family: \"AntDesign\",\n        style: {\n          textAlign: 'center'\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 21\n        }\n      })), React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        size: 18,\n        style: {\n          fontFamily: 'montserrat-regular',\n          textAlign: 'center',\n          marginTop: 10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 21\n        }\n      }, _this.textAlert(_this.state.statusApproval), ' \\n\\n Total Item : ' + _this.state.listApproval.length)), _this.state.statusApproval != 'A' ? React.createElement(Block, {\n        center: true,\n        style: {\n          paddingVertical: 15\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 21\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Remarks\",\n        placeholderTextColor: nowTheme.COLORS.MUTED,\n        style: styles.input,\n        onChangeText: function onChangeText(val) {\n          return _this.inputValueUpdate(val, 'remarks');\n        },\n        color: nowTheme.COLORS.HEADER,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 25\n        }\n      })) : React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 21\n        }\n      }), React.createElement(Block, {\n        row: true,\n        center: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 17\n        }\n      }, React.createElement(Button, {\n        size: 'small',\n        onPress: function onPress() {\n          return _this.onSubmit();\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontFamily: 'montserrat-bold'\n        },\n        size: 14,\n        color: nowTheme.COLORS.WHITE,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 25\n        }\n      }, \"YES\")), React.createElement(Button, {\n        size: 'small',\n        color: nowTheme.COLORS.ERROR,\n        onPress: function onPress() {\n          return _this.setState({\n            showAlert: false\n          });\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontFamily: 'montserrat-bold'\n        },\n        size: 14,\n        color: nowTheme.COLORS.WHITE,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 25\n        }\n      }, \"NO\"))));\n    };\n\n    _this.placeAlert = function () {\n      return React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 17\n        }\n      }, React.createElement(AwesomeAlert, {\n        show: _this.state.showAlert,\n        customView: _this.alertConfirm(),\n        closeOnTouchOutside: false,\n        closeOnHardwareBackPress: false,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 21\n        }\n      })), React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 17\n        }\n      }, React.createElement(AwesomeAlert, {\n        show: _this.state.successAlert,\n        customView: _this.alertSuccess(),\n        closeOnTouchOutside: false,\n        closeOnHardwareBackPress: false,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 21\n        }\n      })));\n    };\n\n    _this.alertSuccess = function () {\n      return React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }\n      }, React.createElement(Block, {\n        style: {\n          textAlign: 'center'\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 17\n        }\n      }, React.createElement(Icon, {\n        size: 50,\n        color: nowTheme.COLORS.PRIMARY,\n        name: \"check-circle\",\n        family: \"Feather\",\n        style: {\n          textAlign: 'center'\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 21\n        }\n      })), React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        size: 20,\n        style: {\n          fontFamily: 'montserrat-regular',\n          textAlign: 'center',\n          marginBottom: 5,\n          marginTop: 10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 21\n        }\n      }, ' Data successful ' + (_this.state.statusApproval == 'A' ? 'Approved' : 'Rejected'))), React.createElement(Block, {\n        center: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 17\n        }\n      }, React.createElement(Button, {\n        onPress: function onPress() {\n          _this.setState({\n            successAlert: false\n          });\n\n          _this.props.navigation.navigate('Detail MV');\n        },\n        color: nowTheme.COLORS.PRIMARY,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontFamily: 'montserrat-bold'\n        },\n        size: 14,\n        color: nowTheme.COLORS.WHITE,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 25\n        }\n      }, \"OK\"))));\n    };\n\n    _this.textAlert = function (status) {\n      var text = '';\n\n      if (status == 'A') {\n        text = 'Approve';\n      } else if (status == 'R') {\n        text = 'Reject';\n      } else {\n        text = 'Pending By QC';\n      }\n\n      return 'Are you sure want to ' + text + ' this data?';\n    };\n\n    _this.state = {\n      listData: [],\n      isLoading: true,\n      showAlert: false,\n      successAlert: false,\n      listApproval: [],\n      id_master: 0,\n      remarks: ''\n    };\n    return _this;\n  }\n\n  _createClass(Approval, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data_user, data_login, id_master;\n      return _regeneratorRuntime.async(function componentDidMount$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              this._isMounted = true;\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('data_user'));\n\n            case 3:\n              data_user = _context3.sent;\n              data_user = JSON.parse(data_user);\n              data_login = {\n                project: data_user.project_id,\n                api: data_user.api_key,\n                id_user: data_user.id_user\n              };\n              id_master = this.props.route.params.id;\n              this.setState({\n                dataLogin: data_login,\n                id_master: id_master\n              });\n              this.readData();\n              return _context3.abrupt(\"return\", function () {\n                isMounted = false;\n              });\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Block, {\n        flex: true,\n        center: true,\n        style: styles.home,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 13\n        }\n      }, this.state.isLoading == true ? this.Loading() : this.renderArticles(), this.approvalButton(), this.placeAlert());\n    }\n  }]);\n\n  return Approval;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  home: {\n    width: width\n  },\n  articles: {\n    width: width - theme.SIZES.BASE * 2,\n    paddingVertical: theme.SIZES.BASE,\n    paddingHorizontal: 2,\n    fontFamily: 'montserrat-regular'\n  }\n});\nexport default Approval;","map":{"version":3,"sources":["C:/xampp/htdocs/iym_mobile/SC/iym_mobile/screens/Approval/Approval_mv.js"],"names":["React","AwesomeAlert","AsyncStorage","Block","Button","Icon","Input","theme","Text","ApprovalMVList","nowTheme","approval_mrir","config","Dimensions","get","width","Approval","_isMounted","checkCallback","checked","id","approval","state","listApproval","push","i","length","splice","setState","console","log","readData","id_master","project","dataLogin","api","url","fetch","method","headers","Headers","then","response","text","data","list_data","slice","JSON","parse","listData","results_detail","isLoading","renderArticles","styles","articles","map","item","index","Loading","flex","justifyContent","alignItems","COLORS","PRIMARY","approvalButton","fontFamily","showAlert","statusApproval","BLOCK","WHITE","ERROR","FACEBOOK","textAlign","onSubmit","forEach","element","remarks","id_user","options","body","stringify","approved_by","mat_verid","successAlert","catch","error","inputValueUpdate","val","prop","alertConfirm","marginTop","textAlert","paddingVertical","MUTED","input","HEADER","placeAlert","alertSuccess","marginBottom","props","navigation","navigate","status","getItem","data_user","data_login","project_id","api_key","route","params","isMounted","home","Component","StyleSheet","create","SIZES","BASE","paddingHorizontal"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport AwesomeAlert from 'react-native-awesome-alerts';\nimport { \n    ActivityIndicator,\n    AsyncStorage,\n    Dimensions,\n    StyleSheet, \n    ScrollView \n} from \"react-native\";\n\nimport { \n    Block, \n    Button,\n    Icon,\n    Input, \n    theme, \n    Text \n} from \"galio-framework\";\n\nimport { ApprovalMVList } from \"../../components\";\nimport { nowTheme, approval_mrir, config } from \"../../constants\";\nconst { width } = Dimensions.get(\"screen\");\n\nclass Approval extends React.Component {\n\n    _isMounted = false;\n\n    constructor() {\n        super();\n\n        this.state = {\n          listData: [],\n          isLoading: true,\n          showAlert: false,\n          successAlert: false,\n          listApproval: [],\n          id_master: 0,\n          remarks: '',\n        };\n    }\n\n    async componentDidMount() {\n        this._isMounted = true;\n\n        var data_user = await AsyncStorage.getItem('data_user');\n        var data_user = JSON.parse(data_user);\n\n        var data_login = {\n            project: data_user.project_id,\n            api: data_user.api_key,\n            id_user: data_user.id_user,\n        }\n\n        var id_master = this.props.route.params.id;\n\n        this.setState({\n            dataLogin: data_login,\n            id_master: id_master\n        });\n\n        this.readData()\n\n        return () => { isMounted = false };\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    checkCallback = (checked, id) =>{\n\n        let approval = this.state.listApproval;\n\n        if(checked == true){\n            approval.push(id);\n        } else {\n            for(var i=0; i < approval.length; i++){\n                if(approval[i] == id){\n                    approval.splice(i, 1);\n                }\n            }\n        }\n\n        this.setState({listApproval: approval});\n\n        console.log(this.state.listApproval);\n    }\n\n    readData = async() => {\n        try{\n            var id_master   = this.state.id_master;\n            var project     = this.state.dataLogin.project;\n            var api         = this.state.dataLogin.api;\n\n            var url = config.config.url + '/api/mv/detail/pending/' + id_master;\n\n            console.log(url);\n            console.log(api);\n        \n            await fetch(url, {\n                method: 'GET',\n                headers: new Headers({\n                    'Authorization': api\n                }),\n            })\n            .then((response) => response.text())\n            .then(data =>{\n                var list_data = data;\n        \n                if(data.slice(-1) != '}'){\n                    list_data = data + '}';\n                }\n\n                list_data = JSON.parse(list_data);\n\n                this.setState({\n                    listData: list_data.results_detail,\n                    isLoading: false,\n                });\n\n            });\n        }catch(e){\n\n        }\n    }\n\n    renderArticles = () => {\n        return (\n        <ScrollView\n            showsVerticalScrollIndicator={false}\n            contentContainerStyle={styles.articles}\n        >\n            <Block flex>\n            {\n                this.state.listData.map((item, index) => {\n                // approval_mrir.map((item, index) => {\n                    return(\n                        <Block flex row key={index}>\n                            <ApprovalMVList \n                                item={item}\n                                checkboxChange={this.checkCallback}\n                                horizontal \n                            />\n                        </Block>\n                    );\n                })\n            }\n            </Block>\n        </ScrollView>\n        );\n    };\n\n    Loading = function(){\n        return(\n            <Block style={{ flex: 1, justifyContent: 'center', alignItems: 'center'  }}>\n                <ActivityIndicator size=\"large\" color={nowTheme.COLORS.PRIMARY} />\n            </Block>\n        );\n    }\n\n    approvalButton = () => {\n        return(\n            <Block>\n\n                <Block>\n                    <Text\n                        style={{ fontFamily: 'montserrat-bold' }}\n                        size={14}\n                    >\n                        Total Item: {this.state.listApproval.length}\n                    </Text>\n                </Block>\n        \n                <Block row space='between'>\n                    <Block>\n                        <Button \n                            label='' \n                            onPress={() => this.setState({showAlert: true, statusApproval: 'A'})}\n                            disabled={this.state.listApproval.length == 0}\n                            color={(this.state.listApproval.length == 0) ? theme.COLORS.BLOCK : nowTheme.COLORS.PRIMARY } \n                            style={{\n                                width: width / 3.7,\n                            }}\n                        >\n                            <Text\n                                style={{ fontFamily: 'montserrat-bold' }}\n                                size={14}\n                                color={nowTheme.COLORS.WHITE}\n                            >\n                                Approve\n                            </Text>\n                        </Button>\n                    </Block>\n\n                    <Block>\n                        <Button \n                            label='' \n                            onPress={() => this.setState({showAlert: true, statusApproval: 'R'})} \n                            color={(this.state.listApproval.length == 0) ? theme.COLORS.BLOCK : nowTheme.COLORS.ERROR }\n                            style={{\n                                width: width / 3.7,\n                            }}\n                        >\n                            <Text\n                                style={{ fontFamily: 'montserrat-bold' }}\n                                size={14}\n                                color={nowTheme.COLORS.WHITE}\n                            >\n                                Reject\n                            </Text>\n                        </Button>\n                    </Block>\n\n                    <Block>\n                        <Button \n                            label='' \n                            onPress={() => this.setState({showAlert: true, statusApproval: 'P'})} \n                            color={(this.state.listApproval.length == 0) ? theme.COLORS.BLOCK : nowTheme.COLORS.FACEBOOK }\n                            style={{\n                                width: width / 3.7,\n                            }}\n                        >\n                            <Text\n                                style={{ \n                                    fontFamily: 'montserrat-bold',\n                                    textAlign: 'center', \n                                }}\n                                size={14}\n                                color={nowTheme.COLORS.WHITE}\n                            >\n                                Pending By QC\n                            </Text>\n                        </Button>\n                    </Block>\n                </Block>\n\n            </Block>\n            \n        );\n    }\n\n    onSubmit = async() => {\n        this.setState({\n            showAlert: false\n        });\n    \n        var data = [];\n      \n        this.state.listApproval.forEach(element => {\n            data.push({\n                'id': element,\n                'action': this.state.statusApproval,\n                'remarks': this.state.remarks,\n            });\n        });\n\n        var id_master   = this.state.id_master;\n        var id_user     = this.state.dataLogin.id_user;\n        var api         = this.state.dataLogin.api;\n\n        let options = {\n            method: 'POST',\n            headers: new Headers({\n                'Authorization': api,\n                'Content-Type': 'application/json'\n            }),\n            body: JSON.stringify({\n                approved_by: id_user,\n                approval: data,\n                mat_verid: id_master, \n            })\n        };\n        \n        var url = config.config.url + '/api/mv/approval_process';\n\n        await fetch(url, options)\n        .then(response => response.text())\n        .then(data => {\n\n            console.log(data);\n\n            this.setState({\n                successAlert: true,\n                listApproval: []\n            });\n\n            // this.props.navigation.navigate('Detail MV');\n\n        })\n        .catch(error => {\n            console.error(error);\n        });\n    }\n\n    inputValueUpdate = (val, prop) => {\n        const state = this.state;\n        state[prop] = val;\n        this.setState(state);\n    }\n\n    alertConfirm = () => {\n        return(\n            <Block>\n                <Block \n                    style={{ \n                        textAlign: 'center',  \n                    }}\n                >\n                    <Icon\n                        size={50}\n                        color={nowTheme.COLORS.ERROR}\n                        name=\"warning\"\n                        family=\"AntDesign\"\n                        style={{\n                            textAlign: 'center',\n                        }}\n                    />\n                </Block>\n\n                <Block>\n                    <Text\n                        size={18}\n                        style={{ \n                            fontFamily: 'montserrat-regular',\n                            textAlign: 'center', \n                            marginTop: 10,\n                        }}\n                    >\n                        {this.textAlert(this.state.statusApproval)}\n\n                        {' \\n\\n Total Item : ' + this.state.listApproval.length }\n\n                    </Text>\n                </Block>\n\n                { this.state.statusApproval != 'A' ? (\n                    <Block center style={{paddingVertical: 15}} >\n                        <Input\n                            placeholder=\"Remarks\"\n                            placeholderTextColor={nowTheme.COLORS.MUTED}\n                            style={styles.input}\n                            onChangeText={(val) => this.inputValueUpdate(val, 'remarks')}\n                            color={nowTheme.COLORS.HEADER}\n                        />\n                    </Block>\n                ) : <Block />}\n                \n                <Block row center >\n                    <Button \n                        size={'small'}\n                        onPress={ () => this.onSubmit() }\n                    >\n                        <Text\n                            style={{ fontFamily: 'montserrat-bold' }}\n                            size={14}\n                            color={nowTheme.COLORS.WHITE}\n                        >\n                            YES\n                        </Text>\n                    </Button>\n\n                    <Button \n                        size={'small'}\n                        color={nowTheme.COLORS.ERROR}\n                        onPress={ () => this.setState({showAlert: false}) }\n                    >\n                        <Text\n                            style={{ fontFamily: 'montserrat-bold' }}\n                            size={14}\n                            color={nowTheme.COLORS.WHITE}\n                        >\n                            NO\n                        </Text>\n                    </Button>\n                </Block>\n\n            </Block>\n        );\n    }\n\n    placeAlert = () => {\n        return(\n            <Block>\n                <Block>\n                    <AwesomeAlert\n                        show={this.state.showAlert}\n                        // show={true}\n                        customView={this.alertConfirm()}\n                        closeOnTouchOutside={false}\n                        closeOnHardwareBackPress={false}\n                    />\n                </Block>\n\n                <Block>\n                    <AwesomeAlert\n                        show={this.state.successAlert}\n                        // show={true}\n                        customView={this.alertSuccess()}\n                        closeOnTouchOutside={false}\n                        closeOnHardwareBackPress={false}\n                    />\n                </Block>\n            </Block>\n        );\n    }\n\n    alertSuccess = () => {\n        return(\n            <Block>\n                <Block \n                    style={{ \n                        textAlign: 'center',  \n                    }}\n                >\n                    <Icon\n                        size={50}\n                        color={nowTheme.COLORS.PRIMARY}\n                        name=\"check-circle\"\n                        family=\"Feather\"\n                        style={{\n                            textAlign: 'center',\n                        }}\n                    />\n                </Block>\n\n                <Block>\n                    <Text\n                        size={20}\n                        style={{ \n                        fontFamily: 'montserrat-regular',\n                        textAlign: 'center', \n                        marginBottom: 5,\n                        marginTop: 10,\n                        }}\n                    >\n                        {' Data successful ' + (this.state.statusApproval == 'A' ? 'Approved' : 'Rejected') }\n\n                    </Text>\n                </Block>\n                \n                <Block center >\n                    <Button \n                        onPress={ () => {\n                            this.setState({successAlert: false});\n                            this.props.navigation.navigate('Detail MV');\n                        }}\n                        color={nowTheme.COLORS.PRIMARY}\n                    >\n                        <Text\n                            style={{ fontFamily: 'montserrat-bold' }}\n                            size={14}\n                            color={nowTheme.COLORS.WHITE}\n                        >\n                            OK\n                        </Text>\n                    </Button>\n\n                </Block>\n            </Block>\n        );\n    }\n\n    textAlert = (status) => {\n        var text = '';\n        if(status == 'A'){\n            text = 'Approve';\n        } else if(status == 'R'){\n            text = 'Reject';\n        } else {\n            text = 'Pending By QC';\n        }\n\n        return(\n            'Are you sure want to ' + text + ' this data?'\n        );\n    }\n\n    render() {\n        return (\n            <Block flex center style={styles.home}>\n                { this.state.isLoading == true ? this.Loading() : this.renderArticles() }\n                { this.approvalButton() }\n                { this.placeAlert() }\n            </Block>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n  home: {\n    width: width\n  },\n  articles: {\n    width: width - theme.SIZES.BASE * 2,\n    paddingVertical: theme.SIZES.BASE,\n    paddingHorizontal: 2,\n    fontFamily: 'montserrat-regular'\n\n  }\n});\n\nexport default Approval;\n"]},"metadata":{},"sourceType":"module"}