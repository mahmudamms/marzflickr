{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\iym_mobile\\\\SC\\\\iym_mobile\\\\screens\\\\Detail\\\\Detail_visual.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Block, Input, theme, Text } from \"galio-framework\";\nimport { DetailVisualList, Button, Filter, LoadMore } from \"../../components\";\nimport { nowTheme, detail_mrir, config } from \"../../constants\";\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    width = _Dimensions$get.width;\n\nvar Detail = function (_React$Component) {\n  _inherits(Detail, _React$Component);\n\n  var _super = _createSuper(Detail);\n\n  function Detail() {\n    var _this;\n\n    _classCallCheck(this, Detail);\n\n    _this = _super.call(this);\n    _this._isMounted = false;\n\n    _this.loadCallback = function (limit) {\n      var project = _this.state.dataLogin.project;\n      var api = _this.state.dataLogin.api;\n      var url = config.config.url + '/api/vt/list/pending/' + project + '/' + limit + '/' + _this.state.filter;\n      console.log(url);\n      console.log(api);\n      fetch(url, {\n        method: 'GET',\n        headers: new Headers({\n          'Authorization': api\n        })\n      }).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        var list_data = data;\n\n        if (list_data.slice(-1) != '}') {\n          list_data = data + '}';\n        }\n\n        list_data = JSON.parse(list_data);\n        var all_data = _this.state.listData;\n        list_data.results.forEach(function (element) {\n          all_data.push(element);\n        });\n\n        _this.setState({\n          listData: all_data,\n          isLoadData: false,\n          loadButton: list_data.results.length >= 10 ? true : false\n        });\n      });\n    };\n\n    _this.filterCallback = function (filterdata) {\n      _this.setState({\n        isLoadData: true,\n        filter: filterdata\n      });\n\n      var project = _this.state.dataLogin.project;\n      var api = _this.state.dataLogin.api;\n      var url = config.config.url + '/api/vt/list/pending/' + project + '/0/' + filterdata;\n      console.log(url);\n      console.log(api);\n      fetch(url, {\n        method: 'GET',\n        headers: new Headers({\n          'Authorization': api\n        })\n      }).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        var list_data = data;\n\n        if (data.slice(-1) != '}') {\n          list_data = data + '}';\n        }\n\n        list_data = JSON.parse(list_data);\n\n        _this.setState({\n          listData: list_data.results,\n          isLoadData: false,\n          loadButton: list_data.results.length >= 10 ? true : false\n        });\n      });\n    };\n\n    _this.readData = function () {\n      var project = _this.state.dataLogin.project;\n      var api = _this.state.dataLogin.api;\n      var url = config.config.url + '/api/vt/list/pending/' + project + '/0';\n      console.log(url);\n      console.log(api);\n      fetch(url, {\n        method: 'GET',\n        headers: new Headers({\n          'Content-Type': 'application/json',\n          \"Accept\": \"application/json\",\n          'Authorization': api\n        })\n      }).then(function (response) {\n        return response.text();\n      }).then(function (data) {\n        var list_data = data;\n\n        if (data.slice(-1) != '}') {\n          list_data = data + '}';\n        }\n\n        list_data = JSON.parse(list_data);\n\n        _this.setState({\n          listData: list_data.results,\n          isLoading: false,\n          loadButton: list_data.results.length >= 10 ? true : false\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    };\n\n    _this.renderArticles = function () {\n      return React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }\n      }, React.createElement(Filter, {\n        filterClicked: _this.filterCallback,\n        filterBy: ['Module', 'Discipline', 'Batch'],\n        menu: 'VT',\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }), React.createElement(ScrollView, {\n        showsVerticalScrollIndicator: false,\n        contentContainerStyle: styles.articles,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }\n      }, React.createElement(Block, {\n        flex: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }\n      }, _this.state.listData.map(function (item, index) {\n        return React.createElement(Block, {\n          flex: true,\n          row: true,\n          key: index,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 33\n          }\n        }, React.createElement(DetailVisualList, {\n          item: item,\n          horizontal: true,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 37\n          }\n        }));\n      })), _this.state.loadButton == true ? React.createElement(LoadMore, {\n        limit: _this.state.listData.length + 1,\n        ButtonClicked: _this.loadCallback,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 29\n        }\n      }) : null));\n    };\n\n    _this.Loading = function () {\n      return React.createElement(Block, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        color: nowTheme.COLORS.PRIMARY,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 17\n        }\n      }));\n    };\n\n    console.log();\n    _this.state = {\n      listData: [],\n      isLoading: true,\n      isLoadData: false,\n      loadButton: false,\n      dataLogin: [],\n      filter: ''\n    };\n    return _this;\n  }\n\n  _createClass(Detail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data_user, data_login;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this._isMounted = true;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('data_user'));\n\n            case 3:\n              data_user = _context.sent;\n              data_user = JSON.parse(data_user);\n              data_login = {\n                project: data_user.project_id,\n                api: data_user.api_key\n              };\n              this.setState({\n                dataLogin: data_login\n              });\n              this.readData();\n              return _context.abrupt(\"return\", function () {\n                isMounted = false;\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Block, {\n        flex: true,\n        center: true,\n        style: styles.home,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }\n      }, this.state.isLoading == true ? this.Loading() : this.renderArticles());\n    }\n  }]);\n\n  return Detail;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  home: {\n    width: width\n  },\n  articles: {\n    width: width - theme.SIZES.BASE * 2,\n    paddingVertical: theme.SIZES.BASE,\n    paddingHorizontal: 2,\n    fontFamily: 'montserrat-regular'\n  }\n});\nexport default Detail;","map":{"version":3,"sources":["C:/xampp/htdocs/iym_mobile/SC/iym_mobile/screens/Detail/Detail_visual.js"],"names":["React","AsyncStorage","Block","Input","theme","Text","DetailVisualList","Button","Filter","LoadMore","nowTheme","detail_mrir","config","Dimensions","get","width","Detail","_isMounted","loadCallback","limit","project","state","dataLogin","api","url","filter","console","log","fetch","method","headers","Headers","then","response","text","data","list_data","slice","JSON","parse","all_data","listData","results","forEach","element","push","setState","isLoadData","loadButton","length","filterCallback","filterdata","readData","isLoading","catch","error","renderArticles","styles","articles","map","item","index","Loading","flex","justifyContent","alignItems","COLORS","PRIMARY","getItem","data_user","data_login","project_id","api_key","isMounted","home","Component","StyleSheet","create","SIZES","BASE","paddingVertical","paddingHorizontal","fontFamily"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport { \n    ActivityIndicator,\n    AsyncStorage,\n    Dimensions,\n    StyleSheet, \n    ScrollView \n} from \"react-native\";\n\nimport { \n    Block, \n    Input, \n    theme, \n    Text \n} from \"galio-framework\";\n\nimport { DetailVisualList, Button, Filter, LoadMore } from \"../../components\";\nimport { nowTheme, detail_mrir, config } from \"../../constants\";\nconst { width } = Dimensions.get(\"screen\");\n\nclass Detail extends React.Component {\n\n    _isMounted = false;\n\n    constructor() {\n        super();\n        console.log();\n\n        this.state = {\n          listData: [],\n          isLoading: true,\n          isLoadData: false,\n          loadButton: false,\n          dataLogin: [],\n          filter: '',\n        };\n    }\n\n    async componentDidMount() {\n        this._isMounted = true;\n\n        var data_user = await AsyncStorage.getItem('data_user');\n        var data_user = JSON.parse(data_user);\n\n        var data_login = {\n            project: data_user.project_id,\n            api: data_user.api_key,\n        }\n\n        this.setState({dataLogin: data_login});\n\n        this.readData()\n\n        return () => { isMounted = false };\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    loadCallback = (limit) =>{\n\n        var project = this.state.dataLogin.project;\n        var api     = this.state.dataLogin.api;\n\n        var url = config.config.url + '/api/vt/list/pending/' + project + '/' + limit + '/' + this.state.filter;\n\n        console.log(url);\n        console.log(api);\n    \n        fetch(url, {\n            method: 'GET',\n            headers: new Headers({\n                'Authorization': api\n            }),\n        })\n        .then((response) => response.text())\n        .then(data =>{\n\n            var list_data = data;\n        \n            if(list_data.slice(-1) != '}'){\n                list_data = data + '}';\n            }\n\n            list_data = JSON.parse(list_data);\n\n            var all_data = this.state.listData;\n\n            list_data.results.forEach(element => {\n                all_data.push(element);\n            });\n\n            this.setState({\n                listData: all_data,\n                isLoadData: false,\n                loadButton: (list_data.results.length >= 10 ? true : false),\n            });\n\n        });\n    }\n\n    filterCallback = (filterdata) => {\n        this.setState({\n            isLoadData : true,\n            filter: filterdata,\n        });\n\n        var project   = this.state.dataLogin.project;\n        var api       = this.state.dataLogin.api;\n\n        var url = config.config.url + '/api/vt/list/pending/' + project + '/0/' + filterdata;\n\n        console.log(url);\n        console.log(api);\n    \n        fetch(url, {\n            method: 'GET',\n            headers: new Headers({\n                'Authorization': api\n            }),\n        })\n        .then((response) => response.text())\n        .then(data =>{\n\n            var list_data = data;\n        \n            if(data.slice(-1) != '}'){\n                list_data = data + '}';\n            }\n\n            list_data = JSON.parse(list_data);\n\n            this.setState({\n                listData: list_data.results,\n                isLoadData: false,\n                loadButton: (list_data.results.length >= 10 ? true : false),\n            });\n\n        });\n    }\n\n    readData = () => {\n        var project = this.state.dataLogin.project;\n        var api     = this.state.dataLogin.api;\n\n        var url = config.config.url + '/api/vt/list/pending/' + project + '/0';\n\n        console.log(url);\n        console.log(api);\n\n        fetch(url, {\n            method: 'GET',\n            headers: new Headers({\n                'Content-Type': 'application/json',\n                \"Accept\": \"application/json\",\n                'Authorization': api,\n            }),\n        })\n        .then((response) => response.text())\n        .then((data) =>{\n\n            var list_data = data;\n        \n            if(data.slice(-1) != '}'){\n                list_data = data + '}';\n            }\n\n            list_data = JSON.parse(list_data);\n\n            this.setState({\n                listData: list_data.results,\n                isLoading: false,\n                loadButton: (list_data.results.length >= 10 ? true : false)\n            });\n        }).catch((error) => {\n            console.error(error);\n        });\n    }\n\n    renderArticles = () => {\n        return (\n            <Block>\n                <Filter \n                    filterClicked={this.filterCallback}\n                    filterBy={[\n                        'Module',\n                        'Discipline',\n                        'Batch'\n                    ]}\n                    menu={'VT'}\n                />\n\n                <ScrollView\n                    showsVerticalScrollIndicator={false}\n                    contentContainerStyle={styles.articles}\n                >\n                    <Block flex>\n                    {\n                        this.state.listData.map((item, index) => {\n                        // detail_mrir.map((item, index) => {\n                            return(\n                                <Block flex row key={index}>\n                                    <DetailVisualList \n                                        item={item}\n                                        horizontal \n                                    />\n                                </Block>\n                            );\n                        })\n                    }\n                    </Block>\n\n                    {\n                        this.state.loadButton == true ? (\n                            <LoadMore \n                                limit={this.state.listData.length + 1}\n                                ButtonClicked={this.loadCallback}\n                            />\n                        ) : null\n                    }\n                </ScrollView>\n        </Block>\n        );\n    };\n\n    Loading = function(){\n        return(\n            <Block style={{ flex: 1, justifyContent: 'center', alignItems: 'center'  }}>\n                <ActivityIndicator size=\"large\" color={nowTheme.COLORS.PRIMARY} />\n            </Block>\n        );\n    }\n\n    render() {\n        return (\n            <Block flex center style={styles.home}>\n                { this.state.isLoading == true ? this.Loading() : this.renderArticles() }\n            </Block>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n  home: {\n    width: width\n  },\n  articles: {\n    width: width - theme.SIZES.BASE * 2,\n    paddingVertical: theme.SIZES.BASE,\n    paddingHorizontal: 2,\n    fontFamily: 'montserrat-regular'\n\n  }\n});\n\nexport default Detail;\n"]},"metadata":{},"sourceType":"module"}