{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\iym_mobile\\\\SC\\\\iym_mobile\\\\screens\\\\Workpack\\\\WorkpackFilter.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Block, Button, Input, theme } from \"galio-framework\";\nimport { Autocomplete, WorkpackList, DetailMVList, Divider, Filter, LoadMore, Icon, SelectMultiple, Text } from \"../../components\";\nimport { nowTheme, detail_mrir, example_workpack, config } from \"../../constants\";\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    height = _Dimensions$get.height,\n    width = _Dimensions$get.width;\n\nvar WorkpackFilter = function (_React$Component) {\n  _inherits(WorkpackFilter, _React$Component);\n\n  var _super = _createSuper(WorkpackFilter);\n\n  function WorkpackFilter() {\n    var _this;\n\n    _classCallCheck(this, WorkpackFilter);\n\n    _this = _super.call(this);\n    _this._isMounted = false;\n\n    _this.renderArticles = function () {\n      return React.createElement(Block, {\n        flex: true,\n        center: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }, React.createElement(ScrollView, {\n        showsVerticalScrollIndicator: false,\n        keyboardShouldPersistTaps: \"handled\",\n        contentContainerStyle: '',\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }, React.createElement(Block, {\n        center: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }\n      }, React.createElement(Block, {\n        style: {\n          paddingVertical: 10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }\n      }, React.createElement(Block, {\n        card: true,\n        style: {\n          width: width / 1.1,\n          paddingVertical: 10,\n          paddingHorizontal: 10,\n          backgroundColor: nowTheme.COLORS.WHITE\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 29\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 33\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 37\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 41\n        }\n      }, React.createElement(Block, {\n        center: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 45\n        }\n      }, React.createElement(Text, {\n        title: 'Filter',\n        size: 15,\n        bold: true,\n        color: nowTheme.COLORS.GRAY,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 49\n        }\n      }))))), React.createElement(Block, {\n        style: {\n          paddingVertical: 10,\n          paddingHorizontal: 10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 33\n        }\n      }, React.createElement(Divider, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 37\n        }\n      })), React.createElement(Block, {\n        style: {\n          paddingHorizontal: 10,\n          paddingTop: 10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 33\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 37\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 41\n        }\n      }, React.createElement(Text, {\n        title: 'Workpack No',\n        bold: true,\n        color: nowTheme.COLORS.GRAY,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 45\n        }\n      })), React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 41\n        }\n      }, React.createElement(Autocomplete, {\n        selectedItem: _this.selectedItem,\n        textChanged: _this.textChanged,\n        title: 'Workpack No',\n        value: Object.keys(_this.state.Workpack_No).length === 0 ? '' : _this.state.Workpack_No.name,\n        category: 'Workpack_No',\n        categorySelected: _this.state.categorySelected,\n        data: _this.state.listItems,\n        menu: _this.state.menu,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 45\n        }\n      })))), _this.state.menu == 'MV' ? React.createElement(Block, {\n        style: {\n          paddingHorizontal: 10,\n          paddingTop: 10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 41\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 45\n        }\n      }, React.createElement(Block, {\n        style: {\n          paddingBottom: 10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 49\n        }\n      }, React.createElement(Text, {\n        title: 'Piecemark (optional)',\n        bold: true,\n        color: nowTheme.COLORS.GRAY,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 53\n        }\n      })), React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 49\n        }\n      }, React.createElement(SelectMultiple, {\n        selectedValue: _this.state.Piecemark,\n        selectedItem: _this.selectedItemMultiple,\n        removeSelected: _this.removeSelected,\n        textChanged: _this.textChangedMultiple,\n        data: _this.state.listItems,\n        categorySelected: _this.state.categorySelected,\n        category: 'Piecemark',\n        placeholder: 'Piecemark',\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 53\n        }\n      })))) : React.createElement(Block, {\n        style: {\n          paddingHorizontal: 10,\n          paddingTop: 10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 41\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 45\n        }\n      }, React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 49\n        }\n      }, React.createElement(Text, {\n        title: 'Joint (optional)',\n        bold: true,\n        color: nowTheme.COLORS.GRAY,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 53\n        }\n      })), React.createElement(Block, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 49\n        }\n      }, React.createElement(Autocomplete, {\n        selectedItem: _this.selectedItem,\n        textChanged: _this.textChanged,\n        title: 'Joint',\n        value: Object.keys(_this.state.Joint).length === 0 ? '' : _this.state.Joint.name,\n        category: 'Joint',\n        categorySelected: _this.state.categorySelected,\n        data: _this.state.listItems,\n        menu: _this.state.menu,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 53\n        }\n      })))), React.createElement(Block, {\n        center: true,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 33\n        }\n      }, React.createElement(Button, {\n        onPress: function onPress() {\n          return _this.searchClicked();\n        },\n        color: Object.keys(_this.state.Workpack_No).length === 0 ? nowTheme.COLORS.GRAY : nowTheme.COLORS.PRIMARY,\n        disabled: Object.keys(_this.state.Workpack_No).length === 0,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 37\n        }\n      }, React.createElement(Text, {\n        title: 'Search',\n        size: 15,\n        bold: true,\n        color: nowTheme.COLORS.WHITE,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 41\n        }\n      })))))))));\n    };\n\n    _this.selectedItem = function (item, category) {\n      _this.setState(_defineProperty({}, category, item));\n    };\n\n    _this.selectedItemMultiple = function (item, category) {\n      var _this$setState2;\n\n      var data = _this.state[category];\n      data.push(item);\n\n      _this.setState((_this$setState2 = {}, _defineProperty(_this$setState2, category, data), _defineProperty(_this$setState2, \"listItems\", []), _this$setState2));\n    };\n\n    _this.removeSelected = function (item, category) {\n      var _this$setState3;\n\n      var data = _this.state[category];\n\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].id == item.id) {\n          data.splice(i, 1);\n        }\n      }\n\n      _this.setState((_this$setState3 = {}, _defineProperty(_this$setState3, category, data), _defineProperty(_this$setState3, \"listItems\", []), _this$setState3));\n    };\n\n    _this.textChanged = function (val, props) {\n      var search = val;\n      var category = props;\n      var menu = _this.state.menu;\n      var project = _this.state.dataLogin.project;\n      var api = _this.state.dataLogin.api;\n\n      if (search) {\n        var url = '';\n\n        if (category == 'Workpack_No') {\n          url = config.config.url + '/api/wp/list/' + menu + '/' + project + '/' + search;\n        } else if (category == 'Joint') {\n          var id_workpack = _this.state.Workpack_No.id ? _this.state.Workpack_No.id : '';\n          var filter = id_workpack + 'xx' + search + 'xx';\n          url = config.config.url + '/api/template/list/' + menu + '/' + project + '/' + filter;\n        }\n\n        console.log(url);\n        console.log(api);\n        fetch(url, {\n          method: 'GET',\n          headers: new Headers({\n            'Authorization': api\n          })\n        }).then(function (response) {\n          return response.text();\n        }).then(function (data) {\n          var list_data = data;\n\n          if (data.slice(-1) != '}') {\n            list_data = data + '}';\n          }\n\n          list_data = JSON.parse(list_data);\n\n          _this.setState({\n            listItems: list_data.results,\n            categorySelected: category\n          });\n        }).catch(function (error) {\n          console.error(error);\n        });\n      } else {\n        _this.setState({\n          listItems: []\n        });\n      }\n    };\n\n    _this.textChangedMultiple = function (val, props) {\n      var search = val;\n      var category = props;\n      var menu = _this.state.menu;\n      var project = _this.state.dataLogin.project;\n      var api = _this.state.dataLogin.api;\n\n      if (search) {\n        var url = '';\n        var id_workpack = _this.state.Workpack_No.id ? _this.state.Workpack_No.id : '';\n        var filter = id_workpack + 'xx' + search;\n\n        if (category == 'Piecemark') {\n          url = config.config.url + '/api/template/list/' + menu + '/' + project + '/' + filter;\n        }\n\n        console.log(url);\n        console.log(api);\n        fetch(url, {\n          method: 'GET',\n          headers: new Headers({\n            'Authorization': api\n          })\n        }).then(function (response) {\n          return response.text();\n        }).then(function (data) {\n          var list_data = data;\n\n          if (data.slice(-1) != '}') {\n            list_data = data + '}';\n          }\n\n          list_data = JSON.parse(list_data);\n\n          _this.setState({\n            listItems: list_data.results,\n            categorySelected: category\n          });\n        }).catch(function (error) {\n          console.error(error);\n        });\n      } else {\n        _this.setState({\n          listItems: []\n        });\n      }\n    };\n\n    _this.searchClicked = function () {\n      var data_workpack = _this.state.Workpack_No;\n      var data_piecemark = _this.state.Piecemark;\n      var data_joint = _this.state.Joint;\n      var menu = _this.state.menu;\n      var phase = _this.state.Workpack_No.phase;\n\n      if (phase == 'PF') {\n        _this.props.navigation.navigate('MV Surveyor List', {\n          data_workpack: data_workpack,\n          data_piecemark: data_piecemark,\n          menu: menu\n        });\n      } else if (phase == 'FB' && menu == 'FU') {\n        _this.props.navigation.navigate('FU Surveyor List', {\n          data_workpack: data_workpack,\n          data_joint: data_joint,\n          menu: menu\n        });\n      } else if (phase == 'FB' && menu == 'VT') {\n        _this.props.navigation.navigate('VT Surveyor List', {\n          data_workpack: data_workpack,\n          menu: menu\n        });\n      }\n    };\n\n    _this.state = {\n      listData: [],\n      isLoading: false,\n      isLoadData: false,\n      loadButton: false,\n      dataLogin: [],\n      filter: '',\n      category_template: 'Joint',\n      menu: '',\n      filterBy: ['Workpack_No'],\n      dataAC: [],\n      Workpack_No: {},\n      Piecemark: [],\n      Joint: []\n    };\n    return _this;\n  }\n\n  _createClass(WorkpackFilter, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data_user, data_login;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this._isMounted = true;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('data_user'));\n\n            case 3:\n              data_user = _context.sent;\n              data_user = JSON.parse(data_user);\n              data_login = {\n                project: data_user.project_id,\n                api: data_user.api_key\n              };\n              this.setState({\n                dataLogin: data_login,\n                menu: this.props.route.params.menu\n              });\n              return _context.abrupt(\"return\", function () {\n                isMounted = false;\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Block, {\n        flex: true,\n        center: true,\n        style: styles.home,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }\n      }, this.renderArticles());\n    }\n  }]);\n\n  return WorkpackFilter;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  home: {\n    width: width\n  },\n  articles: {\n    width: width - theme.SIZES.BASE * 2,\n    paddingVertical: theme.SIZES.BASE,\n    paddingHorizontal: 2,\n    fontFamily: 'montserrat-regular'\n  }\n});\nexport default WorkpackFilter;","map":{"version":3,"sources":["C:/xampp/htdocs/iym_mobile/SC/iym_mobile/screens/Workpack/WorkpackFilter.js"],"names":["React","AsyncStorage","Block","Button","Input","theme","Autocomplete","WorkpackList","DetailMVList","Divider","Filter","LoadMore","Icon","SelectMultiple","Text","nowTheme","detail_mrir","example_workpack","config","Dimensions","get","height","width","WorkpackFilter","_isMounted","renderArticles","paddingVertical","paddingHorizontal","backgroundColor","COLORS","WHITE","GRAY","paddingTop","selectedItem","textChanged","Object","keys","state","Workpack_No","length","name","categorySelected","listItems","menu","paddingBottom","Piecemark","selectedItemMultiple","removeSelected","textChangedMultiple","Joint","searchClicked","PRIMARY","item","category","setState","data","push","i","id","splice","val","props","search","project","dataLogin","api","url","id_workpack","filter","console","log","fetch","method","headers","Headers","then","response","text","list_data","slice","JSON","parse","results","catch","error","data_workpack","data_piecemark","data_joint","phase","navigation","navigate","listData","isLoading","isLoadData","loadButton","category_template","filterBy","dataAC","getItem","data_user","data_login","project_id","api_key","route","params","isMounted","styles","home","Component","StyleSheet","create","articles","SIZES","BASE","fontFamily"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport { \n    ActivityIndicator,\n    AsyncStorage,\n    FlatList,\n    Dimensions,\n    StyleSheet, \n    ScrollView \n} from \"react-native\";\n\nimport { \n    Block, \n    Button, \n    Input, \n    theme, \n} from \"galio-framework\";\n\nimport { \n    Autocomplete,\n    WorkpackList, \n    DetailMVList, \n    Divider,\n    Filter, \n    LoadMore ,\n    Icon,\n    SelectMultiple,\n    Text,\n} from \"../../components\";\n\nimport { nowTheme, detail_mrir, example_workpack, config } from \"../../constants\";\nconst { height, width } = Dimensions.get(\"screen\");\n\nclass WorkpackFilter extends React.Component {\n\n    _isMounted = false;\n\n    constructor() {\n        super();\n        // console.log();\n\n        this.state = {\n          listData: [],\n          isLoading: false,\n          isLoadData: false,\n          loadButton: false,\n          dataLogin: [],\n          filter: '',\n          category_template: 'Joint',\n          menu: '',\n          filterBy: ['Workpack_No'],\n\n          dataAC: [],\n\n          Workpack_No: {},\n          Piecemark: [],\n          Joint: [],\n        };\n    }\n\n    async componentDidMount() {\n        this._isMounted = true;\n\n        var data_user = await AsyncStorage.getItem('data_user');\n        var data_user = JSON.parse(data_user);\n\n        var data_login = {\n            project: data_user.project_id,\n            api: data_user.api_key,\n        }\n\n        this.setState({\n            dataLogin: data_login,\n            menu: this.props.route.params.menu,\n        });\n\n        // this.readData()\n\n        return () => { isMounted = false };\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    render() {\n        return (\n            <Block flex center style={styles.home}>\n                { this.renderArticles() }\n            </Block>\n        );\n    }\n\n    renderArticles = () => {\n\n        return (\n            <Block flex center>\n                <ScrollView\n                    showsVerticalScrollIndicator={false}\n                    keyboardShouldPersistTaps='handled'\n                    contentContainerStyle={''}\n                >\n                <Block center>\n                    <Block>\n                        <Block style={{paddingVertical: 10}}>\n                            <Block \n                                card  \n                                style={{\n                                    width: width / 1.1, \n                                    paddingVertical: 10, \n                                    paddingHorizontal: 10, \n                                    backgroundColor: nowTheme.COLORS.WHITE\n                                }}\n                            >\n                                <Block>\n                                    <Block>\n                                        <Block>\n                                            <Block center>\n                                                <Text\n                                                    title={'Filter'}\n                                                    size={15}\n                                                    bold\n                                                    color={nowTheme.COLORS.GRAY}\n                                                />\n                                            </Block>\n                                        </Block>\n                                    </Block>\n                                </Block>\n\n                                <Block style={{paddingVertical: 10, paddingHorizontal: 10}}>\n                                    <Divider />\n                                </Block>\n\n                                <Block style={{paddingHorizontal: 10, paddingTop: 10}}>\n                                    <Block>\n                                        <Block>\n                                            <Text\n                                                title={'Workpack No'}\n                                                bold\n                                                color={nowTheme.COLORS.GRAY}\n                                            />\n                                        </Block>\n\n                                        <Block>\n                                            <Autocomplete\n                                                selectedItem={this.selectedItem}\n                                                textChanged={this.textChanged}\n                                                title={'Workpack No'}\n                                                value={Object.keys(this.state.Workpack_No).length === 0 ? '' : this.state.Workpack_No.name}\n                                                category={'Workpack_No'}\n                                                categorySelected={this.state.categorySelected}\n                                                data={this.state.listItems}\n                                                menu={this.state.menu}\n                                            />\n                                        </Block>\n                                    </Block>\n                                </Block>\n\n                                {\n                                    this.state.menu == 'MV' ? (\n                                        <Block style={{paddingHorizontal: 10, paddingTop: 10}}>\n                                            <Block>\n                                                <Block style={{paddingBottom: 10}}>\n                                                    <Text\n                                                        title={'Piecemark (optional)'}\n                                                        bold\n                                                        color={nowTheme.COLORS.GRAY}\n                                                    />\n                                                </Block>\n\n                                                <Block>\n                                                    <SelectMultiple \n                                                        selectedValue={this.state.Piecemark}\n                                                        selectedItem={this.selectedItemMultiple}\n                                                        removeSelected={this.removeSelected}\n                                                        textChanged={this.textChangedMultiple}\n                                                        data={this.state.listItems}\n                                                        categorySelected={this.state.categorySelected}\n                                                        category={'Piecemark'}\n                                                        placeholder={'Piecemark'}\n                                                    />\n                                                </Block>\n                                            </Block>\n                                        </Block>\n                                    ) : (\n                                        <Block style={{paddingHorizontal: 10, paddingTop: 10}}>\n                                            <Block>\n                                                <Block>\n                                                    <Text\n                                                        title={'Joint (optional)'}\n                                                        bold\n                                                        color={nowTheme.COLORS.GRAY}\n                                                    />\n                                                </Block>\n\n                                                <Block>\n                                                    <Autocomplete\n                                                        selectedItem={this.selectedItem}\n                                                        textChanged={this.textChanged}\n                                                        title={'Joint'}\n                                                        value={Object.keys(this.state.Joint).length === 0 ? '' : this.state.Joint.name}\n                                                        category={'Joint'}\n                                                        categorySelected={this.state.categorySelected}\n                                                        data={this.state.listItems}\n                                                        menu={this.state.menu}\n                                                    />\n                                                </Block>\n                                            </Block>\n                                        </Block>\n                                    )\n                                }\n\n                                <Block center>\n                                    <Button \n                                        onPress={() => this.searchClicked()}\n                                        color={Object.keys(this.state.Workpack_No).length === 0 ? nowTheme.COLORS.GRAY : nowTheme.COLORS.PRIMARY }\n                                        disabled={Object.keys(this.state.Workpack_No).length === 0}\n                                    >\n                                        <Text\n                                            title={'Search'}\n                                            size={15}\n                                            bold\n                                            color={nowTheme.COLORS.WHITE}\n                                        />\n                                    </Button>\n                                </Block>\n\n                            </Block>\n                        </Block>\n                    </Block>\n                </Block>\n                </ScrollView>\n            </Block>\n        );\n    };\n\n    selectedItem = (item, category) => {\n        // this.state[category] = item;\n        this.setState({[category] : item});\n    }\n\n    selectedItemMultiple = (item, category) => {\n        var data = this.state[category];\n            data.push(item);\n\n        this.setState({\n            [category] : data,\n            listItems: [],\n        });\n    }\n\n    removeSelected = (item, category) => {\n        var data = this.state[category];\n\n        for(var i=0; i < data.length; i++){\n            if(data[i].id == item.id){\n                data.splice(i, 1);\n            }\n        }\n\n        this.setState({\n            [category] : data,\n            listItems: [],\n        });\n    }\n    \n    textChanged = (val, props) => {\n        var search      = val;\n        var category    = props;\n        var menu        = this.state.menu;\n        var project     = this.state.dataLogin.project;\n        var api         = this.state.dataLogin.api;\n    \n        if(search){\n          var url = '';\n    \n          if(category == 'Workpack_No'){\n            url = config.config.url + '/api/wp/list/' + menu + '/' + project + '/' + search;\n          } else if(category == 'Joint'){\n\n            var id_workpack = (this.state.Workpack_No.id) ? this.state.Workpack_No.id : '';\n            var filter = id_workpack + 'xx' + search + 'xx';\n\n            url = config.config.url + '/api/template/list/' + menu + '/' + project + '/' + filter;\n          }\n    \n          console.log(url);\n          console.log(api);\n    \n          fetch(url, {\n              method: 'GET',\n              headers: new Headers({\n                  'Authorization': api\n              }),\n          })\n          .then((response) => response.text())\n          .then(data =>{\n    \n            var list_data = data;\n              \n            if(data.slice(-1) != '}'){\n              list_data = data + '}';\n            }\n    \n            list_data = JSON.parse(list_data);\n    \n            this.setState({\n              listItems: list_data.results,\n              categorySelected: category,\n            })\n    \n          }).catch((error) => {\n            console.error(error);\n          });\n    \n        } else {\n          this.setState({\n            listItems: []\n          });\n        }\n        \n    }\n\n    textChangedMultiple = (val, props) => {\n        var search      = val;\n        var category    = props;\n        var menu        = this.state.menu;\n        var project     = this.state.dataLogin.project;\n        var api         = this.state.dataLogin.api;\n    \n        if(search){\n          var url = '';\n          var id_workpack = (this.state.Workpack_No.id) ? this.state.Workpack_No.id : '';\n\n          var filter = id_workpack + 'xx' + search;\n        \n          if(category == 'Piecemark'){\n            url = config.config.url + '/api/template/list/' + menu + '/' + project + '/' + filter;\n          }\n    \n          console.log(url);\n          console.log(api);\n    \n          fetch(url, {\n              method: 'GET',\n              headers: new Headers({\n                  'Authorization': api\n              }),\n          })\n          .then((response) => response.text())\n          .then(data =>{\n    \n            var list_data = data;\n              \n            if(data.slice(-1) != '}'){\n              list_data = data + '}';\n            }\n    \n            list_data = JSON.parse(list_data);\n    \n            this.setState({\n              listItems: list_data.results,\n              categorySelected: category,\n            })\n    \n          }).catch((error) => {\n            console.error(error);\n          });\n    \n        } else {\n          this.setState({\n            listItems: []\n          });\n        }\n    }\n\n    searchClicked = () => {\n\n        var data_workpack   = this.state.Workpack_No;\n        var data_piecemark  = this.state.Piecemark;\n        var data_joint      = this.state.Joint;\n        var menu            = this.state.menu;\n        var phase           = this.state.Workpack_No.phase;\n\n        if(phase == 'PF'){\n            this.props.navigation.navigate('MV Surveyor List', {\n                data_workpack: data_workpack,\n                data_piecemark: data_piecemark,\n                menu: menu,\n            })\n        } else if(phase == 'FB' && menu == 'FU'){\n            this.props.navigation.navigate('FU Surveyor List', {\n                data_workpack: data_workpack,\n                data_joint: data_joint,\n                menu: menu,\n            })\n        } else if(phase == 'FB' && menu == 'VT'){\n            this.props.navigation.navigate('VT Surveyor List', {\n                data_workpack: data_workpack,\n                menu: menu,\n            })\n        }\n\n    }\n}\n\nconst styles = StyleSheet.create({\n  home: {\n    width: width\n  },\n  articles: {\n    width: width - theme.SIZES.BASE * 2,\n    paddingVertical: theme.SIZES.BASE,\n    paddingHorizontal: 2,\n    fontFamily: 'montserrat-regular'\n\n  }\n});\n\nexport default WorkpackFilter;\n"]},"metadata":{},"sourceType":"module"}